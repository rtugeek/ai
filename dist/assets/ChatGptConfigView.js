var qe=Object.defineProperty,Je=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var _e=(o,l,n)=>l in o?qe(o,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[l]=n,G=(o,l)=>{for(var n in l||(l={}))Ze.call(l,n)&&_e(o,n,l[n]);if(Ve)for(var n of Ve(l))et.call(l,n)&&_e(o,n,l[n]);return o},ze=(o,l)=>Je(o,Qe(l));var X=(o,l,n)=>new Promise((a,d)=>{var p=r=>{try{f(n.next(r))}catch(y){d(y)}},s=r=>{try{f(n.throw(r))}catch(y){d(y)}},f=r=>r.done?a(r.value):Promise.resolve(r.value).then(p,s);f((n=n.apply(o,l)).next())});import{p as $e,q as tt,r as at,s as ke,d as ot,e as nt,f as re,i as Fe,t as st,U as ce,a as lt,v as rt,b as it,c as ut,g as Pe,V as dt,x as ct,y as pt,z as ft,A as mt,B as Te,u as vt,E as M,C as gt,_ as ht,w as bt,k as yt,m as xt,n as wt,D as St,F as Ct,G as It}from"./useConfig.js";import{c as m,g as Ae,r as $,D as ee,y as te,G as Et,H as ie,d as pe,I as Vt,u as _t,A as N,z as zt,t as kt,o as v,b as E,j as g,F as ue,n as w,f as t,e as q,q as R,a as V,w as b,h as J,m as de,l as x,J as Ft,K as Pt,L as Q,C as Tt,M as Ne,$ as Nt,k as Rt,O as $t,P as At,Q as Bt,s as Z}from"./index.js";const Lt=()=>$e&&/firefox/i.test(window.navigator.userAgent),Ot=o=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(o),Mt=o=>o,Ht=["class","style"],Dt=/^on[A-Z]/,Kt=(o={})=>{const{excludeListeners:l=!1,excludeKeys:n}=o,a=m(()=>((n==null?void 0:n.value)||[]).concat(Ht)),d=Ae();return d?m(()=>{var p;return tt(Object.entries((p=d.proxy)==null?void 0:p.$attrs).filter(([s])=>!a.value.includes(s)&&!(l&&Dt.test(s))))}):m(()=>({}))};function Ut(o){const l=$();function n(){if(o.value==null)return;const{selectionStart:d,selectionEnd:p,value:s}=o.value;if(d==null||p==null)return;const f=s.slice(0,Math.max(0,d)),r=s.slice(Math.max(0,p));l.value={selectionStart:d,selectionEnd:p,value:s,beforeTxt:f,afterTxt:r}}function a(){if(o.value==null||l.value==null)return;const{value:d}=o.value,{beforeTxt:p,afterTxt:s,selectionStart:f}=l.value;if(p==null||s==null||f==null)return;let r=d.length;if(d.endsWith(s))r=d.length-s.length;else if(d.startsWith(p))r=p.length;else{const y=p[f-1],S=d.indexOf(y,f-1);S!==-1&&(r=S+1)}o.value.setSelectionRange(r,r)}return[n,a]}function jt(o,{afterFocus:l,beforeBlur:n,afterBlur:a}={}){const d=Ae(),{emit:p}=d,s=ee(),f=$(!1),r=u=>{f.value||(f.value=!0,p("focus",u),l==null||l())},y=u=>{var k;Et(n)&&n(u)||u.relatedTarget&&((k=s.value)!=null&&k.contains(u.relatedTarget))||(f.value=!1,p("blur",u),a==null||a())},S=()=>{var u;(u=o.value)==null||u.focus()};return te(s,u=>{u&&u.setAttribute("tabindex","-1")}),at(s,"click",S),{wrapperRef:s,isFocused:f,handleFocus:r,handleBlur:y}}let I;const Wt=`
  height:0 !important;
  visibility:hidden !important;
  ${Lt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Yt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Gt(o){const l=window.getComputedStyle(o),n=l.getPropertyValue("box-sizing"),a=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),d=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Yt.map(s=>`${s}:${l.getPropertyValue(s)}`).join(";"),paddingSize:a,borderSize:d,boxSizing:n}}function Re(o,l=1,n){var a;I||(I=document.createElement("textarea"),document.body.appendChild(I));const{paddingSize:d,borderSize:p,boxSizing:s,contextStyle:f}=Gt(o);I.setAttribute("style",`${f};${Wt}`),I.value=o.value||o.placeholder||"";let r=I.scrollHeight;const y={};s==="border-box"?r=r+p:s==="content-box"&&(r=r-d),I.value="";const S=I.scrollHeight-d;if(ke(l)){let u=S*l;s==="border-box"&&(u=u+d+p),r=Math.max(u,r),y.minHeight=`${u}px`}if(ke(n)){let u=S*n;s==="border-box"&&(u=u+d+p),r=Math.min(u,r)}return y.height=`${r}px`,(a=I.parentNode)==null||a.removeChild(I),I=void 0,y}const Xt=ot(G({id:{type:String,default:void 0},size:nt,disabled:Boolean,modelValue:{type:re([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:re([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Fe},prefixIcon:{type:Fe},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:re([Object,Array,String]),default:()=>Mt({})},autofocus:{type:Boolean,default:!1}},st(["ariaLabel"]))),qt={[ce]:o=>ie(o),input:o=>ie(o),change:o=>ie(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},Jt=["role"],Qt=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],Zt=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],ea=pe({name:"ElInput",inheritAttrs:!1}),ta=pe(ze(G({},ea),{props:Xt,emits:qt,setup(o,{expose:l,emit:n}){const a=o,d=Vt(),p=_t(),s=m(()=>{const e={};return a.containerRole==="combobox"&&(e["aria-haspopup"]=d["aria-haspopup"],e["aria-owns"]=d["aria-owns"],e["aria-expanded"]=d["aria-expanded"]),e}),f=m(()=>[a.type==="textarea"?fe.b():c.b(),c.m(C.value),c.is("disabled",F.value),c.is("exceed",Me.value),{[c.b("group")]:p.prepend||p.append,[c.bm("group","append")]:p.append,[c.bm("group","prepend")]:p.prepend,[c.m("prefix")]:p.prefix||a.prefixIcon,[c.m("suffix")]:p.suffix||a.suffixIcon||a.clearable||a.showPassword,[c.bm("suffix","password-clear")]:W.value&&ne.value,[c.b("hidden")]:a.type==="hidden"},d.class]),r=m(()=>[c.e("wrapper"),c.is("focus",oe.value)]),y=Kt({excludeKeys:m(()=>Object.keys(s.value))}),{form:S,formItem:u}=lt(),{inputId:k}=rt(a,{formItemContext:u}),C=it(),F=ut(),c=Pe("input"),fe=Pe("textarea"),H=ee(),_=ee(),ae=$(!1),A=$(!1),D=$(!1),me=$(),K=ee(a.inputStyle),P=m(()=>H.value||_.value),{wrapperRef:Be,isFocused:oe,handleFocus:U,handleBlur:j}=jt(P,{afterBlur(){var e;a.validateEvent&&((e=u==null?void 0:u.validate)==null||e.call(u,"blur").catch(i=>Te()))}}),ve=m(()=>{var e;return(e=S==null?void 0:S.statusIcon)!=null?e:!1}),B=m(()=>(u==null?void 0:u.validateState)||""),ge=m(()=>B.value&&dt[B.value]),Le=m(()=>D.value?ct:pt),Oe=m(()=>[d.style]),he=m(()=>[a.inputStyle,K.value,{resize:a.resize}]),z=m(()=>ft(a.modelValue)?"":String(a.modelValue)),W=m(()=>a.clearable&&!F.value&&!a.readonly&&!!z.value&&(oe.value||ae.value)),ne=m(()=>a.showPassword&&!F.value&&!a.readonly&&!!z.value&&(!!z.value||oe.value)),T=m(()=>a.showWordLimit&&!!a.maxlength&&(a.type==="text"||a.type==="textarea")&&!F.value&&!a.readonly&&!a.showPassword),se=m(()=>z.value.length),Me=m(()=>!!T.value&&se.value>Number(a.maxlength)),He=m(()=>!!p.suffix||!!a.suffixIcon||W.value||a.showPassword||T.value||!!B.value&&ve.value),[De,Ke]=Ut(H);mt(_,e=>{if(Ue(),!T.value||a.resize!=="both")return;const i=e[0],{width:h}=i.contentRect;me.value={right:`calc(100% - ${h+15+6}px)`}});const L=()=>{const{type:e,autosize:i}=a;if(!(!$e||e!=="textarea"||!_.value))if(i){const h=Ne(i)?i.minRows:void 0,Y=Ne(i)?i.maxRows:void 0,Ee=Re(_.value,h,Y);K.value=G({overflowY:"hidden"},Ee),N(()=>{_.value.offsetHeight,K.value=Ee})}else K.value={minHeight:Re(_.value).minHeight}},Ue=(e=>{let i=!1;return()=>{var h;if(i||!a.autosize)return;((h=_.value)==null?void 0:h.offsetParent)===null||(e(),i=!0)}})(L),O=()=>{const e=P.value,i=a.formatter?a.formatter(z.value):z.value;!e||e.value===i||(e.value=i)},le=e=>X(this,null,function*(){De();let{value:i}=e.target;if(a.formatter&&(i=a.parser?a.parser(i):i),!A.value){if(i===z.value){O();return}n(ce,i),n("input",i),yield N(),O(),Ke()}}),be=e=>{n("change",e.target.value)},ye=e=>{n("compositionstart",e),A.value=!0},xe=e=>{var i;n("compositionupdate",e);const h=(i=e.target)==null?void 0:i.value,Y=h[h.length-1]||"";A.value=!Ot(Y)},we=e=>{n("compositionend",e),A.value&&(A.value=!1,le(e))},je=()=>{D.value=!D.value,Se()},Se=()=>X(this,null,function*(){var e;yield N(),(e=P.value)==null||e.focus()}),We=()=>{var e;return(e=P.value)==null?void 0:e.blur()},Ye=e=>{ae.value=!1,n("mouseleave",e)},Ge=e=>{ae.value=!0,n("mouseenter",e)},Ce=e=>{n("keydown",e)},Xe=()=>{var e;(e=P.value)==null||e.select()},Ie=()=>{n(ce,""),n("change",""),n("clear"),n("input","")};return te(()=>a.modelValue,()=>{var e;N(()=>L()),a.validateEvent&&((e=u==null?void 0:u.validate)==null||e.call(u,"change").catch(i=>Te()))}),te(z,()=>O()),te(()=>a.type,()=>X(this,null,function*(){yield N(),O(),L()})),zt(()=>{!a.formatter&&a.parser,O(),N(L)}),vt({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input",ref:"https://element-plus.org/en-US/component/input.html"},m(()=>!!a.label)),l({input:H,textarea:_,ref:P,textareaStyle:he,autosize:kt(a,"autosize"),focus:Se,blur:We,select:Xe,clear:Ie,resizeTextarea:L}),(e,i)=>(v(),E("div",de(t(s),{class:t(f),style:t(Oe),role:e.containerRole,onMouseenter:Ge,onMouseleave:Ye}),[g(" input "),e.type!=="textarea"?(v(),E(ue,{key:0},[g(" prepend slot "),e.$slots.prepend?(v(),E("div",{key:0,class:w(t(c).be("group","prepend"))},[q(e.$slots,"prepend")],2)):g("v-if",!0),R("div",{ref_key:"wrapperRef",ref:Be,class:w(t(r))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(v(),E("span",{key:0,class:w(t(c).e("prefix"))},[R("span",{class:w(t(c).e("prefix-inner"))},[q(e.$slots,"prefix"),e.prefixIcon?(v(),V(t(M),{key:0,class:w(t(c).e("icon"))},{default:b(()=>[(v(),V(J(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),R("input",de({id:t(k),ref_key:"input",ref:H,class:t(c).e("inner")},t(y),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?D.value?"text":"password":e.type,disabled:t(F),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label||e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,onCompositionstart:ye,onCompositionupdate:xe,onCompositionend:we,onInput:le,onFocus:i[0]||(i[0]=(...h)=>t(U)&&t(U)(...h)),onBlur:i[1]||(i[1]=(...h)=>t(j)&&t(j)(...h)),onChange:be,onKeydown:Ce}),null,16,Qt),g(" suffix slot "),t(He)?(v(),E("span",{key:1,class:w(t(c).e("suffix"))},[R("span",{class:w(t(c).e("suffix-inner"))},[!t(W)||!t(ne)||!t(T)?(v(),E(ue,{key:0},[q(e.$slots,"suffix"),e.suffixIcon?(v(),V(t(M),{key:0,class:w(t(c).e("icon"))},{default:b(()=>[(v(),V(J(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),t(W)?(v(),V(t(M),{key:1,class:w([t(c).e("icon"),t(c).e("clear")]),onMousedown:Ft(t(Pt),["prevent"]),onClick:Ie},{default:b(()=>[x(t(gt))]),_:1},8,["class","onMousedown"])):g("v-if",!0),t(ne)?(v(),V(t(M),{key:2,class:w([t(c).e("icon"),t(c).e("password")]),onClick:je},{default:b(()=>[(v(),V(J(t(Le))))]),_:1},8,["class"])):g("v-if",!0),t(T)?(v(),E("span",{key:3,class:w(t(c).e("count"))},[R("span",{class:w(t(c).e("count-inner"))},Q(t(se))+" / "+Q(e.maxlength),3)],2)):g("v-if",!0),t(B)&&t(ge)&&t(ve)?(v(),V(t(M),{key:4,class:w([t(c).e("icon"),t(c).e("validateIcon"),t(c).is("loading",t(B)==="validating")])},{default:b(()=>[(v(),V(J(t(ge))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(v(),E("div",{key:1,class:w(t(c).be("group","append"))},[q(e.$slots,"append")],2)):g("v-if",!0)],64)):(v(),E(ue,{key:1},[g(" textarea "),R("textarea",de({id:t(k),ref_key:"textarea",ref:_,class:t(fe).e("inner")},t(y),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(F),readonly:e.readonly,autocomplete:e.autocomplete,style:t(he),"aria-label":e.label||e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,onCompositionstart:ye,onCompositionupdate:xe,onCompositionend:we,onInput:le,onFocus:i[2]||(i[2]=(...h)=>t(U)&&t(U)(...h)),onBlur:i[3]||(i[3]=(...h)=>t(j)&&t(j)(...h)),onChange:be,onKeydown:Ce}),null,16,Zt),t(T)?(v(),E("span",{key:0,style:Tt(me.value),class:w(t(c).e("count"))},Q(t(se))+" / "+Q(e.maxlength),7)):g("v-if",!0)],64))],16,Jt))}}));var aa=ht(ta,[["__file","input.vue"]]);const oa=bt(aa),ia=pe({__name:"ChatGptConfigView",setup(o){const l=Nt(),{config:n}=yt(),a=Rt(new $t({custom:!0}));function d(){window.close()}return(p,s)=>{const f=wt,r=St,y=Ct,S=oa,u=It,k=At("widget-edit-dialog");return v(),V(k,{"widget-params":t(l),option:a,onConfirm:d},{custom:b(()=>[x(u,{"label-width":90,"label-position":"left"},{default:b(()=>[x(f,{label:"AI平台"},{default:b(()=>[x(xt,{modelValue:t(n).platform,"onUpdate:modelValue":s[0]||(s[0]=C=>t(n).platform=C)},null,8,["modelValue"])]),_:1}),x(f,{label:"呼出快捷键"},{default:b(()=>[x(t(Bt),{modelValue:t(n).shortcut,"onUpdate:modelValue":s[1]||(s[1]=C=>t(n).shortcut=C)},null,8,["modelValue"])]),_:1}),x(f,{label:"代理协议"},{default:b(()=>[x(y,{modelValue:t(n).protocol,"onUpdate:modelValue":s[2]||(s[2]=C=>t(n).protocol=C)},{default:b(()=>[x(r,{label:"http"},{default:b(()=>[Z(" HTTP ")]),_:1}),x(r,{label:"https"},{default:b(()=>[Z(" HTTPS ")]),_:1}),x(r,{label:"sock4"},{default:b(()=>[Z(" SOCK4 ")]),_:1}),x(r,{label:"sock5"},{default:b(()=>[Z(" SOCK5 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),x(f,{label:"代理服务器"},{default:b(()=>[x(S,{modelValue:t(n).host,"onUpdate:modelValue":s[3]||(s[3]=C=>t(n).host=C),class:"flex-1",placeholder:"如：127.0.0.1"},null,8,["modelValue"])]),_:1}),x(f,{label:"代理端口"},{default:b(()=>[x(S,{modelValue:t(n).port,"onUpdate:modelValue":s[4]||(s[4]=C=>t(n).port=C),style:{width:"50px"},placeholder:"如：7890"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["widget-params","option"])}}});export{ia as default};
